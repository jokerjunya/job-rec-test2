# 🔐 Googleログイン設定ガイド

## Firebase ConsoleでGoogle認証を有効化する手順

### 1. Firebase Consoleにアクセス
https://console.firebase.google.com/project/job-swipe-app-2025/authentication/providers

### 2. Google認証を有効化

1. **「Sign-in method」** タブを選択
2. **「Google」** プロバイダーをクリック
3. **「有効にする」** トグルをONにする
4. **「プロジェクトのサポートメール」** を選択（通常は自分のGmailアドレス）
5. **「保存」** をクリック

### 3. 確認

設定完了後、Google認証が「有効」になっていることを確認してください。

## 🎉 使用方法

### ログイン画面から
1. アプリのログイン画面にアクセス: http://localhost:3000
2. **「Googleでログイン」** ボタンをクリック
3. Googleアカウント選択画面が表示されます
4. 使用したいGoogleアカウントを選択
5. 初回のみ、アプリへのアクセス許可を求められます
6. **「許可」** をクリック
7. 自動的にログインし、ホーム画面にリダイレクトされます

### 新規登録画面から
1. **「新規登録」** タブを選択
2. **「Googleで登録」** ボタンをクリック
3. 同じ手順でGoogleアカウントを選択
4. 初回は自動的にFirestoreにユーザー情報が保存されます

## 🔒 セキュリティ機能

### 実装済みの機能
- ✅ アカウント選択の強制（毎回どのアカウントを使うか選択可能）
- ✅ ポップアップブロック検出
- ✅ エラーハンドリング（キャンセル、ブロック、重複アカウントなど）
- ✅ 新規ユーザーの自動Firestore登録
- ✅ 既存ユーザーの自動認識

### エラー処理
以下のエラーが適切に処理されます：
- ポップアップがブロックされた場合
- ユーザーがログインをキャンセルした場合
- 同じメールアドレスが別の方法で登録されている場合

## 🎨 UI/UX

### デザイン
- 公式Googleブランドカラーを使用したアイコン
- ダークモード対応
- メール/パスワード認証との明確な分離（区切り線）
- ローディング状態の表示

### ユーザーエクスペリエンス
- ワンクリックで簡単ログイン
- パスワード不要
- 高速な認証フロー
- メール/パスワード認証も引き続き利用可能

## 📝 技術詳細

### 使用しているFirebase機能
```typescript
import { 
  signInWithPopup, 
  GoogleAuthProvider 
} from 'firebase/auth';
```

### 認証フロー
1. ユーザーが「Googleでログイン」をクリック
2. `GoogleAuthProvider` を初期化
3. `signInWithPopup()` でポップアップを表示
4. ユーザーがGoogleアカウントを選択
5. Firebase Authenticationで認証
6. Firestoreからユーザー情報を取得（新規の場合は作成）
7. 認証コンテキストが自動更新（`onAuthStateChanged`）
8. ホーム画面にリダイレクト

## 🔧 トラブルシューティング

### ポップアップがブロックされる
- ブラウザのポップアップブロッカーを無効化してください
- エラーメッセージが表示されます：「ポップアップがブロックされました」

### ログインがキャンセルされる
- ポップアップを閉じた場合、エラーメッセージが表示されます
- 再度「Googleでログイン」をクリックしてやり直してください

### 「このメールアドレスは別の方法で登録されています」エラー
- 同じメールアドレスで既にメール/パスワード認証を使用している場合に発生
- メール/パスワードでログインするか、別のGoogleアカウントを使用してください

## 📚 参考資料

- [Firebase Authentication - Google](https://firebase.google.com/docs/auth/web/google-signin)
- [Google Identity Platform](https://developers.google.com/identity)

---

**実装完了！** 🎉

Firebase ConsoleでGoogle認証を有効化すれば、すぐに使用できます。

